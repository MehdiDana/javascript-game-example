<!DOCTYPE html>
<html>
<head>
<title>A game in JavaScript</title>
<style type="text/css">
body
	{
	font-family: Arial;
}
*{
	margin:0px;
	padding:8px;
}
input {
	font-size:17px;
	padding-left:15px;
	width:25px;
}

#gameTable1{
	background-color:#f7f7f7;
	width:230px;
	
}
#gameTable2{
	background-color:green;
	width:230px;
}
*{
	-moz-border-radius:5px;
	border-radius:5px;
}
#info{
	margin:0px;
	padding:2px;
}
#showtime{
	width:230px;
	border:1px solid #f7f7f7;
}
#stime{
	margin:0px;
	padding:2px;
	width=50px;
	border:1px solid gray;
}
#stime2{
	margin:0px;
	padding:2px;
	width=50px;
	border:1px solid #f7f7f7;
	margin-right:70px;
}
button {
	background-color:#f7f7f7;
	padding:3px;
}
button:hover{
	background-color:#ffffff;
}
#gameHelp{
	width:300px;
	margin-left:280px;
	margin-top:-260px;
	border:1px solid #f7f7f7f;
	clear:both;
	font-size:12px;
}
#gameHelpHidden{
	display:none;
}
a{
	text-decoration:none;
	color:gray;
	font-size:11px;
}
a:hover{
	color:black;
}
#helpHint{
	padding:10px;
}
.end{
	color:gray;
}
</style>
<script type="text/javascript" >

	function generateNewGame(){
	countTime();
	var d = new Date();
	document.getElementById("stime2").innerHTML= d.toLocaleTimeString();
		var rn = Math.floor(Math.random()*3)+1;
		switch (rn){
			case 1:
				document.getElementById("b1").value=2;
				document.getElementById("b2").value=5;
				document.getElementById("b3").value=7;
				document.getElementById("b4").value="";
				document.getElementById("b5").value=1;
				document.getElementById("b6").value=3;
				document.getElementById("b7").value=4;
				document.getElementById("b8").value=6;
				document.getElementById("b9").value=8;
				break;
			case 2:
				document.getElementById("b1").value=1;
				document.getElementById("b2").value=3;
				document.getElementById("b3").value=5;
				document.getElementById("b4").value=4;
				document.getElementById("b5").value=2;
				document.getElementById("b6").value="";
				document.getElementById("b7").value=8;
				document.getElementById("b8").value=6;
				document.getElementById("b9").value=7;
				break;
			case 3:
				document.getElementById("b1").value=3;
				document.getElementById("b2").value=4;
				document.getElementById("b3").value=1;
				document.getElementById("b4").value=2;
				document.getElementById("b5").value=8;
				document.getElementById("b6").value=6;
				document.getElementById("b7").value="";
				document.getElementById("b8").value=7;
				document.getElementById("b9").value=5;
				break;
			default:
				document.getElementById("b1").value=1;
				document.getElementById("b2").value=3;
				document.getElementById("b3").value=2;
				document.getElementById("b4").value=6;
				document.getElementById("b5").value=5;
				document.getElementById("b6").value=4;
				document.getElementById("b7").value=8;
				document.getElementById("b8").value=7;
				document.getElementById("b9").value="";
		}	
		checkValidMOve();	
		document.getElementById("gameTable2").id="gameTable1";
		document.getElementById("info").innerHTML="New game started...";
		countTime();
	}
	
	function doIt(x){
		bx= "b"+x;
		var xfrom = document.getElementById(bx).value;
		var xto = checkEmptyBox();
		// swap boxes
		document.getElementById(xto).value = xfrom;
		document.getElementById(bx).value = "";
		isDone();
	}
	
	function checkEmptyBox(){
		for(var i=1; i<10; i++){
			bi= "b"+i;
			var xtemp = document.getElementById(bi).value;
			if(xtemp==0){
				return bi;
			}
			
		}
	}
	// check if it solved
	function isDone(){
		var x1= document.getElementById("b1").value;
		var x2= document.getElementById("b2").value;
		var x3= document.getElementById("b3").value;
		var x4= document.getElementById("b4").value;
		var x5= document.getElementById("b5").value;
		var x6= document.getElementById("b6").value;
		var x7= document.getElementById("b7").value;
		var x8= document.getElementById("b8").value;
		var x9= document.getElementById("b9").value;
		if(x1==1 && x2==2 && x3==3 && x4==4 && x5==5 && x6==6 && x7==7 && x8==8){
				document.getElementById("info").innerHTML="You won";
				document.getElementById("gameTable1").id="gameTable2";
				document.getElementById("b1").disabled=true;
				document.getElementById("b2").disabled=true;
				document.getElementById("b3").disabled=true;
				document.getElementById("b4").disabled=true;
				document.getElementById("b5").disabled=true;
				document.getElementById("b6").disabled=true;
				document.getElementById("b7").disabled=true;
				document.getElementById("b8").disabled=true;
				document.getElementById("b9").disabled=true;
			return true;
		}
	
	}
	
	// check valid move or not
	
	function checkValidMOve(){
		var eb = checkEmptyBox();
		switch(eb){
			case "b1":
				document.getElementById("b1").disabled=false;
				document.getElementById("b2").disabled=false;
				document.getElementById("b4").disabled=false;
			
				document.getElementById("b3").disabled=true;
				document.getElementById("b5").disabled=true;
				document.getElementById("b6").disabled=true;
				document.getElementById("b7").disabled=true;
				document.getElementById("b8").disabled=true;
				document.getElementById("b9").disabled=true;
				break;
			case "b2":
				document.getElementById("b1").disabled=false;
				document.getElementById("b2").disabled=false;
				document.getElementById("b3").disabled=false;
				document.getElementById("b5").disabled=false;
			
				document.getElementById("b4").disabled=true;
				document.getElementById("b6").disabled=true;
				document.getElementById("b7").disabled=true;
				document.getElementById("b8").disabled=true;
				document.getElementById("b9").disabled=true;
			break;
			case "b3":
				document.getElementById("b2").disabled=false;
				document.getElementById("b3").disabled=false;
				document.getElementById("b6").disabled=false;
			
				document.getElementById("b1").disabled=true;
				document.getElementById("b4").disabled=true;
				document.getElementById("b5").disabled=true;
				document.getElementById("b7").disabled=true;
				document.getElementById("b8").disabled=true;
				document.getElementById("b9").disabled=true;
			break;
			case "b4":
				document.getElementById("b1").disabled=false;
				document.getElementById("b4").disabled=false;
				document.getElementById("b5").disabled=false;
				document.getElementById("b7").disabled=false;
			
				document.getElementById("b2").disabled=true;
				document.getElementById("b3").disabled=true;
				document.getElementById("b6").disabled=true;
				document.getElementById("b8").disabled=true;
				document.getElementById("b9").disabled=true;
			break;
			case "b5":
				document.getElementById("b2").disabled=false;
				document.getElementById("b4").disabled=false;
				document.getElementById("b5").disabled=false;
				document.getElementById("b6").disabled=false;
				document.getElementById("b8").disabled=false;
			
				document.getElementById("b1").disabled=true;
				document.getElementById("b3").disabled=true;
				document.getElementById("b7").disabled=true;
				document.getElementById("b9").disabled=true;
			break;
			case "b6":
				document.getElementById("b3").disabled=false;
				document.getElementById("b5").disabled=false;
				document.getElementById("b6").disabled=false;
				document.getElementById("b9").disabled=false;
			
				document.getElementById("b1").disabled=true;
				document.getElementById("b2").disabled=true;
				document.getElementById("b4").disabled=true;
				document.getElementById("b7").disabled=true;
				document.getElementById("b8").disabled=true;
			break;
			case "b7":
				document.getElementById("b4").disabled=false;
				document.getElementById("b7").disabled=false;
				document.getElementById("b8").disabled=false;
			
				document.getElementById("b1").disabled=true;
				document.getElementById("b2").disabled=true;
				document.getElementById("b3").disabled=true;
				document.getElementById("b5").disabled=true;
				document.getElementById("b6").disabled=true;
				document.getElementById("b9").disabled=true;
			break;
			case "b8":
				document.getElementById("b5").disabled=false;
				document.getElementById("b7").disabled=false;
				document.getElementById("b8").disabled=false;
				document.getElementById("b9").disabled=false;
			
				document.getElementById("b1").disabled=true;
				document.getElementById("b2").disabled=true;
				document.getElementById("b3").disabled=true;
				document.getElementById("b4").disabled=true;
				document.getElementById("b6").disabled=true;
			break;
			case "b9":
				if(isDone()==true){
					}else {
				document.getElementById("b6").disabled=false;
				document.getElementById("b8").disabled=false;
				document.getElementById("b9").disabled=false;
			
				document.getElementById("b1").disabled=true;
				document.getElementById("b2").disabled=true;
				document.getElementById("b3").disabled=true;
				document.getElementById("b4").disabled=true;
				document.getElementById("b5").disabled=true;
				document.getElementById("b7").disabled=true;
				}
			break;
			default:
				document.getElementById("b1").disabled=false;
				document.getElementById("b2").disabled=false;
				document.getElementById("b3").disabled=false;
				document.getElementById("b4").disabled=false;
				document.getElementById("b5").disabled=false;
				document.getElementById("b6").disabled=false;
				document.getElementById("b7").disabled=false;
				document.getElementById("b8").disabled=false;
				document.getElementById("b9").disabled=false;
			
		}
	
	}
		
	function countTime(){
		var td = new Date();
		var h = td.getHours();
		var m = td.getMinutes();
		var s = td.getSeconds();
		var ms = td.getMilliseconds();
		if(m<10){
			m="0"+m;
		}
		if(s<10){
			s="0"+s;
		}
		if(ms<10){
			ms= "00"+ms;
		}else if(ms>10 && ms<100){
			ms="0"+ms;
		}else{}
		
		document.getElementById("stime").innerHTML=h+":"+m+":"+s+":"+ms;
		setTimeout('countTime()',1);
	}
	 
	function hideHelp(){
		document.getElementById("gameHelp").id="gameHelpHidden";
	}
	function showHelp(){
		document.getElementById("gameHelpHidden").id="gameHelp";
	}

</script>
</head>
<body>
<div id="fb-root"></div>
<h1>A game in JavaScript</h1>
<div id="info">Still playing...</div>
<div id="showtime"><span id="stime2" ><font size="1">time not count this time </font></span><span id="stime" ></span></div>
<div onmouseover="checkValidMOve();" id="gameTable1" >
<table border="1px" id="gTable">
	<tr>
		<td><input readonly id="b1" type="text" onDblClick="doIt(1);" value="1" size="1" /></td>
		<td><input readonly id="b2" type="text" onDblClick="doIt(2);" value="2" size="1" /></td>
		<td><input readonly id="b3" type="text" onDblClick="doIt(3);" value="3" size="1" /></td>
	</tr><tr>
		<td><input readonly id="b4" type="text" onDblClick="doIt(4);" value="4" size="1" /></td>
		<td><input readonly id="b5" type="text" onDblClick="doIt(5);" value="8" size="1" /></td>
		<td><input readonly id="b6" type="text" onDblClick="doIt(6);" value="5" size="1" /></td>
	</tr><tr>
		<td><input readonly id="b7" type="text" onDblClick="doIt(7);" value="7" size="1" /></td>
		<td><input readonly id="b8" type="text" onDblClick="doIt(8);" value="6" size="1" /></td>
		<td><input readonly id="b9" type="text" onDblClick="doIt(9);" value="" size="1" /></td>
	</tr>
</table>
</div>
<button type="button" onclick="generateNewGame();">New game </button>
<a href="#" title="Help?"><span id="helpHint" onmouseover="hideHelp();" onmousedown="showHelp();" >Need help?</span></a>
<div id="gameHelpHidden">How to play?
	Sort the numbers to end with order below
	<table border="1px">
	<tr>
		<td><input readonly  value="1" size="1" /></td>
		<td><input readonly  value="2" size="1" /></td>
		<td><input readonly  value="3" size="1" /></td>
	</tr><tr>
		<td><input readonly value="4" size="1" /></td>
		<td><input readonly value="5" size="1" /></td>
		<td><input readonly value="6" size="1" /></td>
	</tr><tr>
		<td><input readonly value="7" size="1" /></td>
		<td><input readonly value="8" size="1" /></td>
		<td><input readonly value="" size="1" /></td>
	</tr>
</table>
	Double click on the valid box to swap with empty box.
	<br />
	The default game is easy and there is no time count.
	
	<br /><br />
	<span class="end">
This game is written all in JavaScript, HTML and CSS. This is for my educational purpose and has been written in my spare time, so of-course I could optimise the algorithm if I would spend time. Relax and if you have any comments please let me know, [m3dana at gmail dot com ]</a>
	</span>

</div>
</body>
</html>
